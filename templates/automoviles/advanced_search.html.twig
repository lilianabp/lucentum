<div class="widget advanced-search2">
    <h3 class="sidebar-title">Buscar</h3>
    {% if request is defined %}
        {% set marca = request.marca %}
        {% set modelo = request.modelo %}
        {% set combustible = request.combustible %}
        {% set cambio = request.cambio %}
        {% set anio = request.anio %}
        {% if request.max_price is defined %}{% set max_price = request.max_price %}{% else %}{% set max_price = '500000' %}{% endif %}
        {% if request.oferta is defined %}{% set oferta = request.oferta %}{% else %}{% set oferta = 0 %}{% endif %}
        {{ form_start(form, {'action': path('buscarmiautomovil'), 'method': 'POST'}) }}
        <div class="form-group">
            {{ form_widget(form.marca, {'value': marca }) }}
        </div>

        <div class="form-group">
            {{ form_widget(form.modelo, {'attr': {'class': 'form-control', 'placeholder': 'Modelo'}, 'value': modelo }) }}
        </div>
        <div class="form-group">
            {{ form_widget(form.combustible, {'value': combustible }) }}
        </div>
        <div class="form-group">
            {{ form_widget(form.cambio, {'value': cambio }) }}
        </div>
        <div class="form-group">
            {{ form_widget(form.anio, {'attr': {'class': 'form-control', 'placeholder': 'Año', 'style': 'border-right: solid 1px #e0e0e0 !important'}, 'value': anio}) }}
        </div>

        <div class="range-slider">
            <label>Precio</label>
            <div data-min="0" {%if max_price is not empty %}data-max="{{ max_price }}"{% else %}data-max="500000"{% endif %}  data-min-name="min_price" data-max-name="search[max_price]" data-unit="€" class="range-slider-ui ui-slider" aria-disabled="false"></div>
            <div class="clearfix"></div>
        </div>
        <div class="checkbox checkbox-theme checkbox-circle">
            {{ form_widget(form.oferta, {'attr': {'id': 'checkbox2'}, 'checked': oferta }) }}
            <label for="search_oferta">
                OFERTA
            </label>
        </div>
    {% else %}
        {{ form_start(form, {'action': path('buscarmiautomovil'), 'method': 'POST'}) }}
        <div class="form-group">
            {{ form_widget(form.marca) }}
        </div>

        <div class="form-group">
            {{ form_widget(form.modelo, {'attr': {'class': 'form-control', 'placeholder': 'Modelo'} }) }}
        </div>
        <div class="form-group">
            {{ form_widget(form.combustible) }}
        </div>
        <div class="form-group">
            {{ form_widget(form.cambio) }}
        </div>
        <div class="form-group">
            {{ form_widget(form.anio, {'attr': {'class': 'form-control', 'placeholder': 'Año', 'style': 'border-right: solid 1px #e0e0e0 !important'}}) }}
        </div>

        <div class="range-slider">
            <label>Precio</label>
            <div data-min="0" data-max="50000" data-min-name="min_price" data-max-name="search[max_price]" data-unit="€" class="range-slider-ui ui-slider" aria-disabled="false"></div>
            <div class="clearfix"></div>
        </div>
        <div class="checkbox checkbox-theme checkbox-circle">
            {{ form_widget(form.oferta, {'attr': {'id': 'checkbox2'}}) }}
            <label for="search_oferta">
                OFERTA
            </label>
        </div>
    {% endif %}
    <a href="{{ path('automoviles') }}"><p>Limpiar Filtros</p></a>
    <div class="form-group mb-0">
        <button class="search-button">Buscar</button>
    </div>
    {{ form_end(form, {'render_rest': false} ) }}
</div>